{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/ConnectWithLine.vue?91fc","webpack:///./src/components/ConnectWithLine.vue?d595","webpack:///./src/components/SelectedLines.vue?bd75","webpack:///src/components/SelectedLines.vue","webpack:///./src/components/SelectedLines.vue?493c","webpack:///./src/components/SelectedLines.vue","webpack:///./src/components/Block.vue?d223","webpack:///src/components/Block.vue","webpack:///./src/components/Block.vue?a562","webpack:///./src/components/Block.vue","webpack:///./src/components/dragMixin.js","webpack:///./src/components/commonMixin.js","webpack:///src/components/ConnectWithLine.vue","webpack:///./src/components/ConnectWithLine.vue?9be8","webpack:///./src/components/ConnectWithLine.vue","webpack:///./src/main.js","webpack:///./src/components/Block.vue?8d12"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","svgWidth","svgHeight","on","move","up","mouseleave","down","directives","rawName","expression","dragLinePoints","x1","y1","x2","y2","ups","downs","relations","selectedPos","selectedId","removeRelation","_l","item","index","id","removable","text","title","blockDown","blockLeave","blockEnter","deleteBlock","staticRenderFns","style","myStyle","upX","downX","$event","remove","select","leave","click","position","x","y","staticClass","_v","_s","enter","ifMouseDown","ifMouseMove","fromId","fromPos","toId","toPos","mouseX","mouseY","methods","add2relation","resetDragLine","e","clientX","$el","getBoundingClientRect","left","clientY","top","pos","dragDown","connectPoint","addMe","upId","downId","upExtra","upDataMap","extra","downExtra","downDataMap","upType","type","downType","findIndex","computed","ifShowDragLine","ret","BLOCK_WIDTH","BLOCK_HEIGHT","LEFT_RIGHT","UP_DOWN","upMap","forEach","downMap","isNumber","ComponentLibrary","install","Vue","componentName","components","component","use"],"mappings":"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","file":"js/app.66e42abb.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConnectWithLine.vue?vue&type=style&index=0&id=4bc1b7f5&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"width\":\"100%\",\"overflow-x\":\"scroll\"},attrs:{\"min-height\":\"500\"}},[_c('svg',{attrs:{\"width\":_vm.svgWidth,\"height\":_vm.svgHeight,\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\"},on:{\"mousemove\":_vm.move,\"mouseup\":_vm.up,\"mouseleave\":_vm.mouseleave,\"mousedown\":_vm.down}},[_c('line',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.ifShowDragLine),expression:\"ifShowDragLine\"}],staticStyle:{\"stroke\":\"#1989fa\",\"stroke-width\":\"2\",\"stroke-dasharray\":\"5 5\"},attrs:{\"x1\":_vm.dragLinePoints.x1,\"y1\":_vm.dragLinePoints.y1,\"x2\":_vm.dragLinePoints.x2,\"y2\":_vm.dragLinePoints.y2}}),_c('selected-lines',{attrs:{\"ups\":_vm.ups,\"downs\":_vm.downs,\"value\":_vm.relations,\"pos\":_vm.selectedPos,\"id\":_vm.selectedId},on:{\"remove-relation\":_vm.removeRelation}}),_vm._l((_vm.ups),function(item,index){return _c('block',{key:item.id,attrs:{\"pos\":'UP',\"index\":index,\"removable\":_vm.removable,\"id\":item.id,\"text\":item.text,\"title\":item.title},on:{\"down\":_vm.blockDown,\"leave\":_vm.blockLeave,\"enter\":_vm.blockEnter,\"delete\":_vm.deleteBlock}})}),_vm._l((_vm.downs),function(item,index){return _c('block',{key:item.id,attrs:{\"pos\":'DOWN',\"index\":index,\"removable\":_vm.removable,\"id\":item.id,\"text\":item.text},on:{\"down\":_vm.blockDown,\"leave\":_vm.blockLeave,\"enter\":_vm.blockEnter,\"delete\":_vm.deleteBlock}})})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',_vm._l((_vm.selectBlockLines),function(item,index){return _c('line',{key:index,style:(_vm.myStyle(index)),attrs:{\"x1\":item.upX,\"y1\":60,\"x2\":item.downX,\"y2\":90},on:{\"mousedown\":function($event){return _vm.remove(item)},\"mouseenter\":function($event){return _vm.select(item)},\"mouseleave\":_vm.leave}})}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <g>\r\n        <line v-for=\"(item,index) in selectBlockLines\" :key=\"index\" :x1=\"item.upX\" :y1=\"60\" :x2=\"item.downX\" :y2=\"90\" \r\n            :style=\"myStyle(index)\"\r\n            @mousedown=\"remove(item)\" @mouseenter=\"select(item)\" @mouseleave=\"leave\"\r\n        />\r\n    </g>\r\n</template>\r\n<script>\r\nconst BLOCK_WIDTH = 60;\r\n// const BLOCK_HEIGHT = 60;\r\nconst LEFT_RIGHT = 20;\r\n// const UP_DOWN = 30;\r\nexport default {\r\n    name: \"selected-lines\",\r\n    props: {\r\n        ups: {\r\n            type: Array,\r\n            default: ()=>[]\r\n        },\r\n        downs: {\r\n            type: Array,\r\n            default: ()=>[]\r\n        },\r\n        pos: {\r\n            type: String, // 上下，UP、DOWN\r\n            default: \"UP\"\r\n        },\r\n        id: {\r\n            type: String,\r\n            default: null\r\n        },\r\n        value: {\r\n            type: Array,\r\n            default: ()=>[]\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            index: -1,\r\n            relations: this.value\r\n        };\r\n    },\r\n    computed: {\r\n        selectBlockLines () {\r\n            let _this = this;\r\n            if (!this.pos) {\r\n                return [];\r\n            }\r\n            return this.relations.filter (relation => {\r\n                if (_this.pos == \"UP\") {\r\n                    return _this.id == relation.upId;\r\n                } else {\r\n                    return _this.id == relation.downId;\r\n                }                \r\n            }).map(relation => {\r\n                return {\r\n                    upId: relation.upId,\r\n                    downId: relation.downId,\r\n                    upX: _this.upMap[relation.upId] * (BLOCK_WIDTH + LEFT_RIGHT) + BLOCK_WIDTH/2,\r\n                    downX: _this.downMap[relation.downId] * (BLOCK_WIDTH + LEFT_RIGHT) + BLOCK_WIDTH/2\r\n                }\r\n            });\r\n        },\r\n        upMap () {\r\n            let ret = {};\r\n            this.ups.forEach((item,index) => ret[item.id]=index);\r\n            return ret;\r\n        },\r\n        downMap () {\r\n            let ret = {};\r\n            this.downs.forEach((item,index) => ret[item.id]=index);\r\n            return ret;\r\n        }\r\n    },\r\n    methods: {\r\n        remove(relation) {\r\n            let index = this.relations.findIndex(item => item.upId == relation.upId && item.downId == relation.downId);\r\n            if (index >= 0) {\r\n                this.$emit(\"remove-relation\", Object.assign({}, this.relations[index]));\r\n                this.relations.splice(index,1);\r\n                this.index = -1;\r\n            }\r\n        },\r\n        select(relation) {\r\n            this.index = this.selectBlockLines.findIndex(item => item.upId == relation.upId && item.downId == relation.downId);\r\n        },\r\n        leave() {\r\n            this.index = -1;\r\n        },\r\n        myStyle(index) {\r\n            let ret = {\r\n                stroke: this.index == index ? \"#F20D0D\" : \"#a1a1a1\",\r\n                \"stroke-width\": this.index == index ? 3 : 2\r\n            };\r\n            if (this.index == index) ret.cursor = \"pointer\";\r\n            return ret;\r\n        }\r\n    } \r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SelectedLines.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SelectedLines.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SelectedLines.vue?vue&type=template&id=e2e117c8&\"\nimport script from \"./SelectedLines.vue?vue&type=script&lang=js&\"\nexport * from \"./SelectedLines.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{on:{\"click\":_vm.click}},[_c('foreignObject',{attrs:{\"x\":_vm.position.x,\"y\":_vm.position.y,\"width\":\"60\",\"height\":\"60\"}},[_c('div',{staticClass:\"my-text\",staticStyle:{\"display\":\"flex\",\"text-align\":\"center\",\"justify-content\":\"center\",\"align-items\":\"center\",\"font-size\":\"13px\",\"height\":\"100%\"}},[_vm._v(_vm._s(_vm.text))])]),_c('rect',{staticClass:\"my-rect\",style:(_vm.myStyle),attrs:{\"width\":\"60\",\"height\":\"60\",\"x\":_vm.position.x,\"y\":_vm.position.y,\"rx\":\"5\",\"ry\":\"5\"},on:{\"mouseenter\":_vm.enter,\"mouseleave\":_vm.leave,\"mousedown\":_vm.down}},[_c('title',[_vm._v(_vm._s(_vm.title))])]),_c('text',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.removable),expression:\"removable\"}],staticClass:\"my-text canHover\",attrs:{\"x\":_vm.position.x + 50,\"y\":_vm.position.y+11,\"width\":\"10\",\"height\":\"15\",\"fill\":\"#F20D0D\"},on:{\"mousedown\":_vm.deleteBlock}},[_vm._v(\"x\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n<g @click=\"click\">\r\n    <foreignObject :x=\"position.x\" :y=\"position.y\" width=\"60\" height=\"60\">\r\n        <div style=\"display:flex;text-align:center;justify-content:center;align-items:center;font-size:13px;height:100%\" class=\"my-text\">{{text}}</div>\r\n    </foreignObject>\r\n    <rect width=\"60\" height=\"60\" :x=\"position.x\" :y=\"position.y\" rx=\"5\" ry=\"5\"\r\n        @mouseenter=\"enter\" @mouseleave=\"leave\" @mousedown=\"down\"\r\n        :style=\"myStyle\" class=\"my-rect\">\r\n        <title>{{title}}</title>\r\n    </rect>\r\n    <text :x=\"position.x + 50\" :y=\"position.y+11\" width=\"10\" height=\"15\" fill=\"#F20D0D\"\r\n        v-show=\"removable\" class=\"my-text canHover\" @mousedown=\"deleteBlock\"\r\n    >x</text>\r\n</g>\r\n</template>\r\n<script>\r\nconst BLOCK_WIDTH = 60;\r\nconst BLOCK_HEIGHT = 60;\r\nconst LEFT_RIGHT = 20;\r\nconst UP_DOWN = 30;\r\nexport default {\r\n    name: \"block\",\r\n    props: {\r\n        pos: {\r\n            type: String, // 上下，UP、DOWN\r\n            default: \"UP\"\r\n        },\r\n        index: {\r\n            type: Number, // \r\n            default: 0\r\n        },\r\n        text: {\r\n            type: String,\r\n            default: null\r\n        },\r\n        id: {\r\n            type: String,\r\n            default: null\r\n        },\r\n        selected: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        removable: {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        title: {\r\n            type: String,\r\n            default: null\r\n        }\r\n    },\r\n    data () {\r\n        return {\r\n            in: false,\r\n            showDelete: false,\r\n            hoverDelete: false\r\n        };\r\n    },\r\n    computed: {\r\n        position () {\r\n            return {\r\n                x: (BLOCK_WIDTH + LEFT_RIGHT) * this.index + 1,\r\n                y: this.pos == \"UP\" ? 1 : BLOCK_HEIGHT + UP_DOWN + 1\r\n            };\r\n        },\r\n        connectPoint () {\r\n            return {\r\n                x: (BLOCK_WIDTH + LEFT_RIGHT) * this.index + BLOCK_WIDTH / 2 + 1,\r\n                y: this.pos == \"UP\" ? BLOCK_HEIGHT + 1 : BLOCK_HEIGHT + UP_DOWN + 1\r\n            }\r\n        },\r\n        myStyle () {\r\n            return {\r\n                fill: \"white\",\r\n                \"fill-opacity\": 0.5,\r\n                \"stroke-width\": this.highlight ? 2 : 1,\r\n                stroke: this.highlight ? \"#1989fa\" : \"#878787\"\r\n            };\r\n        },\r\n        highlight () {\r\n            // console.log(this._selected);\r\n            return this._selected || this.in;\r\n        },\r\n        _selected () {\r\n            return this.selected;\r\n        },\r\n        deleteStyle () {\r\n            return this.hoverDelete ? {cursor: \"pointer\"} : {}\r\n        }\r\n    },\r\n    methods: {\r\n        enter() {\r\n            this.in = true;\r\n            this.showDelete = true;\r\n            this.dispatch(\"enter\");\r\n        },\r\n        leave() {\r\n            this.in = false;\r\n            this.showDelete = false;\r\n            this.dispatch(\"leave\");\r\n        },\r\n        down() {\r\n            this.dispatch(\"down\");\r\n        },\r\n        up() {\r\n            this.dispatch(\"up\");\r\n        },\r\n        click() {\r\n            this.dispatch(\"select\");\r\n        },\r\n        deleteBlock() {\r\n            this.dispatch(\"delete\");\r\n        },\r\n        dispatch(eventName) {\r\n            this.$emit(eventName, {id:this.id,pos:this.pos});\r\n        }\r\n    }\r\n};\r\n</script>\r\n<style scoped>\r\n.my-rect {\r\n    fill:white;fill-opacity:0.3;stroke-width:1;stroke:black\r\n}\r\n.my-text {\r\n    user-select: none;\r\n    -moz-user-select: none;\r\n    -webkit-user-select: none;\r\n    -ms-user-select: none;\r\n}\r\n.canHover:hover {\r\n    cursor: pointer;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Block.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Block.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Block.vue?vue&type=template&id=1c385ad9&scoped=true&\"\nimport script from \"./Block.vue?vue&type=script&lang=js&\"\nexport * from \"./Block.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Block.vue?vue&type=style&index=0&id=1c385ad9&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1c385ad9\",\n  null\n  \n)\n\nexport default component.exports","/**\r\n * 鼠标按下拖动时，如何显示线条\r\n */\r\nexport default {\r\n    data() {\r\n        return {\r\n            ifMouseDown: false,\r\n            ifMouseMove: false,\r\n            fromId: null,\r\n            fromPos: null,\r\n            toId: null,\r\n            toPos: null,\r\n            mouseX: null,\r\n            mouseY: null\r\n        };\r\n    },\r\n    methods: {\r\n        down() {\r\n            this.ifMouseDown = true;\r\n        },\r\n        up() {\r\n            this.ifMouseDown = false;           \r\n            this.add2relation(); // 如果连线有效，则将其加入到relations中\r\n            this.resetDragLine();\r\n        },       \r\n        move(e) {\r\n            if (!this.ifMouseDown) {\r\n                return;\r\n            }\r\n            this.mouseX = e.clientX - this.$el.getBoundingClientRect().left;\r\n            this.mouseY = e.clientY - this.$el.getBoundingClientRect().top;\r\n        },\r\n        blockEnter(e) {\r\n            // 无起点 或 进入了同类block，则不标记终点\r\n            if (this.fromId && this.fromPos != e.pos) {\r\n                this.toId = e.id;\r\n                this.toPos = e.pos;\r\n            }\r\n        },\r\n        blockLeave() { // 离开block，重置终点\r\n            this.toId = null,\r\n            this.toPos = null\r\n        },\r\n        dragDown (e) {\r\n            this.fromId = e.id;\r\n            this.fromPos = e.pos;\r\n            let t = this.connectPoint(e.id, e.pos);\r\n            this.mouseX = t.x;\r\n            this.mouseY = t.y;\r\n        },     \r\n        mouseleave() { // 鼠标移到svg以外，则清空显示\r\n            this.resetDragLine();\r\n        }, \r\n        add2relation() {\r\n            if(!this.fromId || !this.toId) return;\r\n            if(this.fromPos == this.toPos) return;\r\n            let addMe = {\r\n                upId: this.fromPos == \"UP\" ? this.fromId : this.toId,\r\n                downId: this.fromPos == \"DOWN\" ? this.fromId : this.toId,\r\n            };\r\n            addMe.upExtra = this.upDataMap[addMe.upId].extra;\r\n            addMe.downExtra = this.downDataMap[addMe.downId].extra;\r\n            addMe.upType = this.upDataMap[addMe.upId].type;\r\n            addMe.downType = this.downDataMap[addMe.downId].type;\r\n            let index = this.relations.findIndex(item => item.upId == addMe.upId && item.downId == addMe.downId);\r\n            if (index < 0) {\r\n                this.relations.push(addMe);\r\n            }\r\n        },\r\n        resetDragLine() {\r\n            this.fromId = null;\r\n            this.fromPos = null;\r\n            this.toId = null;\r\n            this.toPos = null;\r\n            this.mouseX = null;\r\n            this.mouseY = null;\r\n        }\r\n    },\r\n    computed: {\r\n        ifShowDragLine () {\r\n            if(!this.fromId) {\r\n                return false;\r\n            }\r\n            return true;\r\n        },\r\n        dragLinePoints () { // 计算点的坐标\r\n            let ret = { x1: 0, y1: 0, x2: 0, y2: 0 };\r\n            if (this.fromId) {\r\n                let t = this.connectPoint(this.fromId, this.fromPos);\r\n                ret.x1 = t.x;\r\n                ret.y1 = t.y;\r\n            }\r\n            if (this.toId) {\r\n                let t = this.connectPoint(this.toId, this.toPos);\r\n                ret.x2 = t.x;\r\n                ret.y2 = t.y;\r\n            } else {\r\n                ret.x2 = this.mouseX;\r\n                ret.y2 = this.mouseY;\r\n            }\r\n            return ret;\r\n        },\r\n    }\r\n};","const BLOCK_WIDTH = 60;\r\nconst BLOCK_HEIGHT = 60;\r\nconst LEFT_RIGHT = 20;\r\nconst UP_DOWN = 30;\r\nexport default {\r\n    computed: {\r\n        upMap () {\r\n            let ret = {};\r\n            this.ups.forEach((item,index) => ret[item.id]=index);\r\n            return ret;\r\n        },\r\n        downMap () {\r\n            let ret = {};\r\n            this.downs.forEach((item,index) => ret[item.id]=index);\r\n            return ret;\r\n        },\r\n        upDataMap() {\r\n            let ret = {};\r\n            this.ups.forEach(item => ret[item.id]=item);\r\n            return ret;\r\n        },\r\n        downDataMap () {\r\n            let ret = {};\r\n            this.downs.forEach(item => ret[item.id]=item);\r\n            return ret;\r\n        }\r\n    },\r\n    methods: {\r\n        connectPoint(id, pos) {\r\n            let ret = {};\r\n            let index = pos == \"UP\" ? this.upMap[id] : this.downMap[id];\r\n            if (typeof index != \"number\") return ret;\r\n            ret.x = index * (BLOCK_WIDTH + LEFT_RIGHT) + BLOCK_WIDTH / 2;\r\n            ret.y = pos == \"UP\" ? BLOCK_HEIGHT + 1 : BLOCK_HEIGHT + UP_DOWN + 1;\r\n            return ret;\r\n        },\r\n        isNumber (n) {\r\n            return typeof n == \"number\";\r\n        }\r\n    }\r\n};","<template>\r\n<div style=\"width:100%;overflow-x:scroll;\" min-height=\"500\">\r\n    <svg :width=\"svgWidth\" :height=\"svgHeight\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" \r\n        @mousemove=\"move\" @mouseup=\"up\" @mouseleave=\"mouseleave\" @mousedown=\"down\"\r\n    >\r\n        <line :x1=\"dragLinePoints.x1\" :y1=\"dragLinePoints.y1\" :x2=\"dragLinePoints.x2\" :y2=\"dragLinePoints.y2\" v-show=\"ifShowDragLine\" \r\n            style=\"stroke:#1989fa;stroke-width:2;stroke-dasharray:5 5;\"/>\r\n        <selected-lines :ups=\"ups\" :downs=\"downs\" :value=\"relations\" :pos=\"selectedPos\" :id=\"selectedId\" @remove-relation=\"removeRelation\" />\r\n        <block v-for=\"(item,index) in ups\" :key=\"item.id\"  :pos=\"'UP'\" :index=\"index\" :removable=\"removable\" :id=\"item.id\" :text=\"item.text\"\r\n            :title=\"item.title\"\r\n            @down=\"blockDown\" @leave=\"blockLeave\" @enter=\"blockEnter\" @delete=\"deleteBlock\" />\r\n        <block v-for=\"(item,index) in downs\" :key=\"item.id\" :pos=\"'DOWN'\" :index=\"index\" :removable=\"removable\" :id=\"item.id\" :text=\"item.text\"\r\n            @down=\"blockDown\" @leave=\"blockLeave\" @enter=\"blockEnter\"  @delete=\"deleteBlock\" />\r\n    </svg>\r\n</div>\r\n</template>\r\n<script>\r\nimport SelectedLines from \"./SelectedLines.vue\";\r\nimport Block from \"./Block.vue\";\r\nimport dragMixin from \"./dragMixin.js\";\r\nimport commonMixin from \"./commonMixin.js\";\r\nconst BLOCK_WIDTH = 60;\r\nconst BLOCK_HEIGHT = 60;\r\nconst LEFT_RIGHT = 20;\r\nconst UP_DOWN = 30;\r\nexport default {\r\n    name: \"connect-with-line\",\r\n    mixins: [dragMixin, commonMixin],\r\n    components: {Block, SelectedLines },\r\n    props: {\r\n        ups: {\r\n            type: Array,\r\n            default: ()=>[]\r\n        },\r\n        downs: {\r\n            type: Array,\r\n            default: ()=>[]\r\n        },\r\n        relations: {\r\n            type: Array,\r\n            default: ()=>[]\r\n        },\r\n        removable: {\r\n            type: Boolean,\r\n            default: false\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            selectedPos: null,\r\n            selectedId: null,\r\n            svgHeight: BLOCK_HEIGHT * 2 + UP_DOWN + 2\r\n        };\r\n    },\r\n    computed: {\r\n        svgWidth () {\r\n            let ret = (BLOCK_WIDTH + LEFT_RIGHT) * Math.max(this.ups.length, this.downs.length) - LEFT_RIGHT + 2;\r\n            return Math.max(ret, 100);\r\n        }\r\n    },\r\n    mounted() {\r\n        this.filter();\r\n    },\r\n    methods: {\r\n        blockDown (e) {\r\n            this.select(e);\r\n            this.dragDown(e);\r\n        },\r\n        select(e) {\r\n            this.selectedPos = e.pos;\r\n            this.selectedId = e.id;\r\n        },\r\n        deleteBlock(e) {\r\n            let index = e.pos == \"UP\" ? this.upMap[e.id] : this.downMap[e.id];\r\n            let arr = e.pos == \"UP\" ? this.ups : this.downs;\r\n            if(typeof index == \"number\") {\r\n                this.$emit(\"remove-block\", Object.assign({}, arr[index]));\r\n                arr.splice(index, 1);\r\n            }\r\n        },\r\n        removeRelation(e) {\r\n            this.$emit(\"remove-relation\", e);\r\n        },\r\n        filter() {\r\n            for (let i = this.relations.length - 1; i >=0; i--) {\r\n                let relation = this.relations[i];\r\n                if (!this.isNumber(this.upMap[relation.upId]) || !this.isNumber(this.downMap[relation.downId])) {\r\n                    this.relations.splice(i,1);\r\n                }\r\n            }\r\n        }     \r\n    },\r\n    watch: {\r\n        ups() {\r\n            this.filter();\r\n        },\r\n        downs(){\r\n            this.filter();\r\n        }\r\n    }\r\n};\r\n</script>\r\n<style scoped>\r\n::-webkit-scrollbar {width: 5px;height: 7px;}\r\n::-webkit-scrollbar-thumb {\r\n\tbackground: rgb(210, 210, 211);\r\n\tborder-radius: 8px;\r\n}\r\n::-webkit-scrollbar-thumb:hover {\r\n\tbackground: rgb(175, 175, 176);\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConnectWithLine.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConnectWithLine.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConnectWithLine.vue?vue&type=template&id=4bc1b7f5&scoped=true&\"\nimport script from \"./ConnectWithLine.vue?vue&type=script&lang=js&\"\nexport * from \"./ConnectWithLine.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ConnectWithLine.vue?vue&type=style&index=0&id=4bc1b7f5&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4bc1b7f5\",\n  null\n  \n)\n\nexport default component.exports","import * as components from \"./components\";\n\nconst ComponentLibrary = {\n  install(Vue) { // 只认components/index.js中export的组件\n    for (const componentName in components) {\n      const component = components[componentName];\n      Vue.component(component.name, component);\n    }\n  }\n};\n\nexport default ComponentLibrary;\n\nif (typeof window !== \"undefined\" && window.Vue) {\n  window.Vue.use(ComponentLibrary);\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Block.vue?vue&type=style&index=0&id=1c385ad9&scoped=true&lang=css&\""],"sourceRoot":""}