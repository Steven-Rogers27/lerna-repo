<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../../../static/common.css" />
		<link rel="stylesheet" type="text/css" href="../../../static/elementui.css" />
		<style type="text/css" href="./newList.css">
		</style>
		<!-- style="margin: 10px 0px;border-radius: 4px;overflow: hidden scroll;height: calc(100vh - 30px);width: calc(100% + -16px);min-width: 1440px;"> -->
	</head>
	<body>
		<div id="companyIndexPage" style="margin: 10px 0;" v-cloak>
			<el-tabs v-model="topActiveName" type="card">
				<el-tab-pane label="运行" name="topActivefirst">
					<div
						style="margin: 10px 0px;border-radius: 4px;overflow: hidden scroll;height: calc(100vh - 80px);width: calc(100% + 9px);min-width: 1440px;">
						<div
							style="height: 50px;background-color: rgb(242, 244, 247);display: flex;align-items: center;justify-content: space-between;position: fixed;top: 60px;z-index: 1;width: calc(100% - 32px);">
							<div style="display: flex;">
								<!-- <span class="fleX">
									<img src="./img/8.png">
									<img src="./img/18.png" >
									<span>添加</span>
								</span>
								<span class="fleX">
									<img src="./img/7.png">
									<img src="./img/17.png" >
									<span>项目</span>
								</span>
								<span class="fleX">
									<img src="./img/6.png">
									<img src="./img/16.png" >
									<span>结构</span>
								</span>
								<span class="fleX">
									<img src="./img/2.png">
									<img src="./img/12.png" >
									<span>模块</span>
								</span>
								<span class="fleX">
									<img src="./img/1.png">
									<img src="./img/11.png" >
									<span>扩展</span>
								</span>
								<span class="fleX">
									<img src="./img/3.png">
									<img src="./img/13.png" >
									<span>切换</span>
								</span>
								<span class="fleX">
									<img src="./img/4.png">
									<img src="./img/14.png" >
									<span>编辑</span>
								</span>
								<span class="fleX">
									<img src="./img/5.png" >
									<img src="./img/15.png">
									<span>调取</span>
								</span> -->
								<!-- <span class="fleX refresh" @mouseenter="delRedEnter()" @mouseleave="delRedLeave()" @click="shuaxin">
									<img v-show="topImg==true"  style="width: 15px;height: 15px;" src="./img/19.png">
									<img v-show="topImg==false" style="width: 15px;height: 15px;" src="./img/20.png">
									<span >刷新</span>
								</span> -->
								<div style="display: flex;color: #949494;">
									<div
										style="display: flex;flex-direction: column;border-right: 1px solid #e6e6e6;padding-right: 10px;margin-left: 10px;">
										<span style="font-weight: bold;color: #333;">施工状态</span>
										<span style="margin-top: 5px;">
											<span>未施工:</span>
											<img class="qizi" src="setting/img/todo.png">
											<span style="margin-left: 5px;">施工中:</span>
											<img class="qizi" src="setting/img/doing.png">
											<span style="margin-left: 5px;">已完成:</span>
											<img class="qizi" src="setting/img/done.png">
										</span>
									</div>
									<div
										style="display: flex;flex-direction: column;border-right: 1px solid #e6e6e6;padding-right: 10px;margin-left: 10px;">
										<span style="font-weight: bold;color: #333;">分级预警</span>
										<span style="margin-top: 5px;">
											<span>一级（30天）:</span>
											<img style="width: 15px;" src="setting/img/red.png">
											<span style="margin-left: 5px;">二级（15天）:</span>
											<img style="width: 15px;" src="setting/img/yellow.png">
											<span style="margin-left: 5px;">三级（7天）:</span>
											<img style="width: 15px;" src="setting/img/blue.png">
											<!-- <span style="margin-left: 5px;">四级（0天）:</span>
											<img style="width: 15px;" src="setting/img/grey.png"> -->
										</span>
									</div>
									<div
										style="display: flex;flex-direction: column;padding-right: 10px;margin-left: 10px;">
										<span style="font-weight: bold;color: #333;">进度预警</span>
										<span style="margin-top: 5px;">
											<span>进度提前:</span>
											<span
												style="display: inline-block;width: 10px;height: 10px;background-color: #1bc088;"></span>
											<span style="margin-left: 5px;">非关键线路延迟:</span>
											<span
												style="display: inline-block;width: 10px;height: 10px;background-color: #fee703;"></span>
											<span style="margin-left: 5px;">关键线路延迟:</span>
											<span
												style="display: inline-block;width:10px;height:10px;background-color: #f2292a;"></span>
										</span>
									</div>
								</div>
							</div>
							<div style="display: flex;">
								<!-- <span class="fleX refresh" @mouseenter="delRedEnter()" @mouseleave="delRedLeave()" @click="shuaxin">
									<img v-show="topImg==true"  style="width: 15px;height: 15px;" src="./img/19.png">
									<img v-show="topImg==false" style="width: 15px;height: 15px;" src="./img/20.png">
									<span >刷新</span>
								</span> -->
								<span class="btnBlue" @click="daoru">导入</span>
								<span class="btnBlue ml10" @click="openHide4">导出</span>
								<span class="btnBlue ml10" @click="shuaxin" style="margin-right: 10px;">刷新</span>
							</div>
						</div>
						<div style="margin: 0 -1px;margin-top: 50px;">
							<el-table @cell-click="openCell" ref="table" :data="treelist"
								style="width: 100%;margin-bottom: 20px;" key="id" row-key="id" border lazy :load="load"
								:default-expand-all="false"
								:tree-props="{children: 'children', hasChildren: 'hasChildren'}"
								:span-method="spanMethod" :row-class-name="rowClassName"
								@expand-change="clickTreeAccordion" empty-text="暂无数据">
								<el-table-column prop="partName" label="部位" width="380" align="left"
									header-align="center">
									<template slot-scope="oobj">
										<div v-if="oobj.row.level==7 && suidaoShow">

											<div class="access_wrap">
												<div class="suidao_wrap">
													<div class="unit_item" v-for="item in ruler_data"
														:class="item.class">
														<div class="num">
															{{item.num===0 ?(sdAllVal.direction == 1 ?  sdAllVal.endMileageFormat : sdAllVal.startMileageFormat) : item.num}}
														</div>
													</div>
													<div class="last_item">
														<!-- {{Number(standard_size) + Number(sdAllVal.startMileage)}} -->
														{{   sdAllVal.direction == 1 ?  sdAllVal.startMileageFormat : sdAllVal.endMileageFormat}}
													</div>
												</div>
												<div class="record_line_wrap" :style="whole_width"
													style="margin-top: 15px;">
													<div v-for="record,i in records_data" :key="i"
														@click.stop="clickRecord(i,1,record,$event)">
														<el-tooltip class="item" effect="dark" :content="record.time"
															placement="top-start">
															<div slot="content">
																{{record.time}}<br />{{record.widthVal}}米</div>
															<div class="record_item"
																:style="{'width':record.width,'border-radius' : i==0 ? '8px 4px 4px 8px;' : '4px'}">
																<span
																	v-if="record.pxval>=30">{{record.widthVal}}m</span>
															</div>
														</el-tooltip>
													</div>
													<div v-if="records_data.length>0"
														style="border-left: 1px dashed #aaa;height: 120px;position: relative;top: -105px;display: flex;">
														<div role="tooltip" id="el-tooltip-685" aria-hidden="true"
															class="el-tooltip__popper is-dark"
															style="transform-origin: center bottom; z-index: 2025;width: 150px;border-top-left-radius: 0px;">
															<div>当前里程：{{sdAllVal.kaileiLicheng}}</div>
															<div x-arrow="" class="popper__arrow" style="left: 8px;">
															</div>
														</div>
													</div>
													<el-tooltip class="item" effect="dark" content="点击采集进尺量"
														placement="top-start">
														<div class="current_item" @click="curCaiji">
														</div>
													</el-tooltip>
													<el-tooltip class="item" effect="dark" content="未完成"
														placement="top-start">
														<div class="undo_item" @click="clickRecord(-1,3,1,$event)">
															<!-- <img src="img/suidao.png"  style="width: 28px;"> -->
														</div>
													</el-tooltip>
												</div>

												<!-- <div class="suidao_wrap"
													style="display: flex;justify-content: space-between;border: none;background-color: transparent;color: #666666;margin: 20px -3px;">
													<span>{{sdAllVal.startMileage}}</span>
													<span>{{sdAllVal.endMileage}}</span>
												</div> -->
											</div>
											<div
												style="width: 80%;margin: 10px 10px 0px 87px;font-weight: bold;color: rgb(170, 170, 170);">
												当前月进度指标<span>{{sdAllVal.monthlyProgress}}</span>m/月
											</div>
											<div style="width: 80%;margin-left: 88px;display: flex;margin-top: 10px;">
												<span @click="openWin(v.id,v.parentId,i,v.name,1,$event)"
													v-for="v,i in suidaoGongxuList" :key="i" class="suidaoSpanGongx"
													style="border: 1px solid #636464;border-left: none;"
													:style="{'border-left' : i==0 ? '1px solid #636464;' : 'none'}">{{v.partName}}</span>
											</div>
											<div
												style="width: 80%;margin: 10px 10px 10px 87px;font-weight: bold;color: rgb(170, 170, 170);">
												注：总长<span>{{sdAllVal.totalLenght}}</span>m，已完成开累<span>{{sdAllVal.quantityImpl}}</span>m，剩余<span>{{sdAllVal.residue}}</span>m，预计
												<span v-if="sixPart.buildStatus == 0">xxx</span>
												<span
													v-else>{{sdAllVal.residue >= 0.1 ? (Number(sdAllVal.expectedCompletionDays)+1) : sdAllVal.expectedCompletionDays}}</span>
												天后完成
											</div>
										</div>
										<div v-show="oobj.row.level==7 && show"
											style="display: flex;flex-direction: column;">
											<div style="display: flex;">
												<div
													style="width: 250px;display: flex;align-items: center;justify-content: center;">
												</div>
												<div id="vediolist" v-cloak @mousemove="move($event)" @mouseup="up"
													style="width: 100%;margin-left: 20px;height: 100%;">
													<div style="min-width: 100%;">
														<svg width="100%" height="100" version="1.1"
															xmlns="http://www.w3.org/2000/svg">
															<defs>
																<marker :id="'arrow'+oobj.$index"
																	markerUnits="strokeWidth" markerWidth="10"
																	markerHeight="10" viewBox="0 0 10 10" refX="6"
																	refY="6" orient="auto">
																	<path d="M2,2 L10,6 L2,10 L6,6 L2,2"
																		style="fill: #c9c9c9;" />
																</marker>
															</defs>
															<defs>
																<filter :id="'f1' + oobj.$index" x="0" y="0"
																	width="200%" height="200%">
																	<feOffset result="offOut" in="SourceGraphic" dx="3"
																		dy="3" />
																	<feColorMatrix result="matrixOut" in="offOut"
																		type="matrix"
																		values="0.2 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 1 0" />
																	<feGaussianBlur result="blurOut" in="matrixOut"
																		stdDeviation="3" />
																	<feBlend in="SourceGraphic" in2="blurOut"
																		mode="normal" />
																</filter>
															</defs>
															<line v-for="v,i in list" :key="'i'+i"
																:x1="i==0 ? 0 : list[i-1].xian" y1="70" :x2="v.xian"
																y2="70"
																:stroke="lineRectColorArr[list[i].lineRectColor]"
																stroke-width="1.5"
																:marker-end="'url(#arrow' + oobj.$index+')'" />
															<circle stroke-width="2" cx="14" cy="70" r="13"
																@click="startGx()" @mouseenter="mouseFirstEnter($event)"
																@mouseleave="mouseFirstLeave"
																v-if="firstLbuildStatus!=3 && firstLbuildStatus!=1"
																fill="#fff" stroke="#E4E7ED">
															</circle>
															<image xlink:href="img/done.png" x="0" y="56" height="26px"
																width="26px"
																v-if="firstLbuildStatus==3||firstLbuildStatus==1" />
															<image xlink:href="img/done.png" v-if="v.buildStatus==3"
																v-for="v,i in list" :key="'j'+i" :x="v.xian+5" y="56"
																height="26px" width="26px" />
															<circle stroke-width="2" v-if="v.buildStatus!=3"
																v-for="v,i in list" :key="'j'+i" :cx="v.xian+18" cy="70"
																r="13" fill="#fff" @click="workDown(v)"
																@mouseenter="mousetishiEnter($event,v,i)"
																@mouseleave="mousetishiLeave" stroke="#E4E7ED"></circle>
															<text v-for="v,i in list" :key="'c'+i"
																@click="openWin(v.id,v.parentId,i,v.name,1,$event)"
																:x="i==0 ? v.xian/2 : list[i-1].xian+((v.xian-list[i-1].xian)/2)"
																y="65" style="text-align: center;font-size: 12px;"
																:width="v.xian+15" fill="#333">{{v.name}}</text>
															<text v-for="v,i in list" :key="'f'+i"
																@mouseenter="mouseEnter($event,v,i)"
																@mouseleave="mouseLeave"
																:x="i==0 ? v.xian/2 : list[i-1].xian+((v.xian-list[i-1].xian)/2)"
																y="85"
																v-if="list[0].expectStartTime!='' && v.buildStatus!=3"
																style="text-align: center;font-size: 12px;"
																:width="v.xian+15" fill="#333"
																@click="openGxTimeModal(v,i)">
																{{i==0 ? (v.xianH*v.pxTimes).toFixed(1) : ((v.xianH-list[i-1].xianH)*v.pxTimes).toFixed(1)}}h</text>
															<text v-for="v,i in list" :key="'f'+i"
																@mouseenter="mouseEnter($event,v,i)"
																@mouseleave="mouseLeave"
																:x="i==0 ? v.xian/2 : list[i-1].xian+((v.xian-list[i-1].xian)/2)"
																y="85"
																v-if="list[0].expectStartTime!='' && v.buildStatus==3"
																style="text-align: center;font-size: 12px;"
																:width="v.xian+15" fill="#333">
																已完成</text>
															<image xlink:href="img/peopleFlag.png"
																v-if="v.buildStatus==1" v-for="v,i in list"
																:key="'ff'+i"
																:x="i==0 ? v.xian/2 : list[i-1].xian+((v.xian-list[i-1].xian)/2)"
																y="20" height="30px" width="27px" />
														</svg>
													</div>
												</div>
											</div>
											<div v-show="workShow"
												style="height: 350px;display: flex;align-items: center;justify-content: center;">
												<img src="setting/img/11.png">
											</div>
										</div>
										<span @contextmenu.prevent="rightClick($event,oobj.row)"
											v-show="oobj.row.level!=7">
											<span>{{oobj.row.partName}}</span>
											<img class="qizi" style="vertical-align: middle;margin-left: 5px;"
												v-if="oobj.row.buildStatus==0" src="./setting/img/todo.png">
											<img class="qizi" style="vertical-align: middle;margin-left: 5px;"
												v-else-if="oobj.row.buildStatus==3" src="./setting/img/done.png">
											<img class="qizi" style="vertical-align: middle;margin-left: 5px;" v-else
												src="./setting/img/doing.png">
										</span>
									</template>
								</el-table-column>
								<el-table-column label="计划开始时间" width="140" class-name="cursor">
									<template slot-scope="obj">
										<span @click="openFiveModal(obj.row)"
											v-if="obj.row.level<=5 || obj.row.buildStatus==3">{{obj.row.expectStartTime}}</span>
										<span style="display: inline-block;width: 100%;height: 100%;" v-else
											@click="openUglyModal(1,obj.row.expectStartTime,obj.row)">{{obj.row.expectStartTime}}</span>
										<!-- <span style="display: inline-block;width: 100%;height: 100%;"
											v-else>{{obj.row.expectStartTime}}</span> -->
									</template>
								</el-table-column>
								<el-table-column label="计划结束时间" width="140" class-name="cursor">
									<template slot-scope="obj">
										<span @click="openFiveModal(obj.row)"
											v-if="obj.row.level<=5 || obj.row.buildStatus==3">{{obj.row.expectEndTime}}</span>
										<span v-else style="display: inline-block;width: 100%;height: 100%;"
											@click="openUglyModal(2,obj.row.expectEndTime,obj.row)">{{obj.row.expectEndTime}}</span>
									</template>
								</el-table-column>
								<el-table-column prop="gongqi" label="工期(天)" width="90">
									<template slot-scope="obj">
										<span style="cursor: pointer;" @click="openFiveModal(obj.row)"
											v-if="obj.row.level<=5 || obj.row.buildStatus==3">
											<span>{{obj.row.gongqi}} <span v-if="obj.row.gongqi!==''">天</span></span>
											<span v-if="obj.row.expectStartTime==''">{{obj.row.duration}}<span
													v-if="obj.row.duration!==''">天</span></span>
										</span>
										<span style="cursor: pointer;" v-else>
											<span>{{obj.row.gongqi}} <span v-if="obj.row.gongqi!==''">天</span></span>
											<span v-if="obj.row.expectStartTime==''">{{obj.row.duration}}<span
													v-if="obj.row.duration!==''">天</span></span>
										</span>
										<!-- <input v-else class="input tableEdit"
											style="border: none;width: 100%!important;text-align: center;min-width: 0;outline: none;height: 100%;"
											v-model="obj.row.gongqi" @blur="changeGongqi(obj.row)" /> -->
									</template>
								</el-table-column>
								<el-table-column prop="" label="里程碑(卡控节点)" width="60">
									<template slot-scope="obj">
										<!-- <span>{{obj.$index}}</span> -->
										<span v-if="obj.row.level==6">
											<el-switch v-model="obj.row.milestone" active-color="#13ce66"
												inactive-color="#dcdfe6" inactive-value="0" active-value="1"
												@change="changeMilestone(obj.row)">
											</el-switch>
										</span>
									</template>
								</el-table-column>
								<el-table-column prop="" label="紧前部位" width="70">
									<template slot-scope="obj">
										<span
											style="width: 100%;height: 100%;display: flex;align-items: center;justify-content: center;">
											<span class="homeIco" style="color: #acb1bb;" title="配置紧前节点"
												v-if="obj.row.tightenUpList==''" @click="setJinQian(obj.row)">&#58949
											</span>
											<span class="homeIco" style="color: #00a400;" title="配置紧前节点"
												v-if="obj.row.tightenUpList!=''" @click="setJinQian(obj.row)">&#58949
											</span>
										</span>
										<!-- <span style="background-color: #F6F9E8;width: 100%;height: 100%;display: flex;cursor: pointer;"
											@click="setJinQian(obj.row)">
											<span v-if="obj.row.tightenUpList!=''" v-for="v,i in obj.row.tightenUpList"
												:key="i"><span v-if="i!=0">、</span>{{v.fullName}} </span>
										</span> -->
									</template>
								</el-table-column>
								<el-table-column prop="" label="预警" width="60">
									<template slot-scope="obj">
										<span v-if="obj.row.mainLine==1">
											<span v-if="obj.row.warnLevel==1">
												<img v-if="(obj.row.disposeWarnStatus==1||obj.row.disposeWarnStatus=='')"
													src="setting/img/redK.png" width="15px" style="cursor: pointer;"
													@click="goWarn(obj.row)">
												<img v-if="obj.row.disposeWarnStatus==2" src="setting/img/redB.png"
													width="15px" style="cursor: pointer;" @click="goWarn(obj.row)">
												<img v-if="obj.row.disposeWarnStatus==3" src="setting/img/red.png"
													width="15px" style="cursor: pointer;" @click="goWarn(obj.row)">
											</span>
											<span v-if="obj.row.warnLevel==2">
												<img v-if="(obj.row.disposeWarnStatus==1||obj.row.disposeWarnStatus=='')"
													src="setting/img/yellowK.png" width="15px" style="cursor: pointer;"
													@click="goWarn(obj.row)">
												<img v-if="obj.row.disposeWarnStatus==2" src="setting/img/yellowB.png"
													width="15px" style="cursor: pointer;" @click="goWarn(obj.row)">
												<img v-if="obj.row.disposeWarnStatus==3" src="setting/img/yellow.png"
													width="15px" style="cursor: pointer;" @click="goWarn(obj.row)">
											</span>
											<span v-if="obj.row.warnLevel==3">
												<img v-if="(obj.row.disposeWarnStatus==1||obj.row.disposeWarnStatus=='')"
													src="setting/img/blueK.png" width="15px" style="cursor: pointer;"
													@click="goWarn(obj.row)">
												<img v-if="obj.row.disposeWarnStatus==2" src="setting/img/blueB.png"
													width="15px" style="cursor: pointer;" @click="goWarn(obj.row)">
												<img v-if="obj.row.disposeWarnStatus==3" src="setting/img/blue.png"
													width="15px" style="cursor: pointer;" @click="goWarn(obj.row)">
											</span>
											<span v-if="obj.row.warnLevel==4">
												<img v-if="(obj.row.disposeWarnStatus==1||obj.row.disposeWarnStatus=='')"
													src="setting/img/greyK.png" width="15px" style="cursor: pointer;"
													@click="goWarn(obj.row)">
												<img v-if="obj.row.disposeWarnStatus==2" src="setting/img/greyK.png"
													width="15px" style="cursor: pointer;" @click="goWarn(obj.row)">
												<img v-if="obj.row.disposeWarnStatus==3" src="setting/img/grey.png"
													width="15px" style="cursor: pointer;" @click="goWarn(obj.row)">
											</span>
										</span>
									</template>
								</el-table-column>
								<el-table-column prop="partName" label="计划实施情况" min-width="650" header-align="left"
									align="left" header-align="center" class-name="lastTd">
									<template slot-scope="obj">
										<!-- <span class="cloClass" :style="{'margin-left':maLeftArr[obj.row.level]}">    首行缩进 -->
										<span
											style="color: #949494;font-size: 13px;margin-right: 10px;">计划工期：{{obj.row.yuceTime}}</span>
										<span v-if="obj.row.buildStatus == 0">
											<span
												style="color: #949494;font-size: 13px;">预计工期：{{obj.row.shijiTime}}</span>
											<!-- <span style="color: #949494;font-size: 13px;margin-left: 10px;"
												v-if="obj.row.expectStartTime==''">暂无预测时间</span>
											<span v-else>
												<span
													style="color: #949494;font-size: 13px;margin-left: 10px;">预测开始时间：{{obj.row.expectStartTime}}</span>
												<span
													style="color: #949494;font-size: 13px;margin-left: 10px;">预测结束时间：{{obj.row.expectEndTime}}</span>
											</span> -->
										</span>
										<span v-else-if="obj.row.buildStatus==3">
											<span
												style="color: #949494;font-size: 13px;">实际工期：{{obj.row.shijiTime}}</span>
											<!-- <span style="color: #949494;font-size: 13px;margin-left: 10px;"
												v-if="obj.row.sjStartTime==''">暂无实际时间</span>
											<span v-else>
												<span
													style="color: #949494;font-size: 13px;margin-left: 10px;">实际开始时间：{{obj.row.sjStartTime}}
												</span>
												<span
													style="color: #949494;font-size: 13px;margin-left: 10px;">实际结束时间：{{obj.row.sjEndTime}}</span>
											</span> -->
										</span>
										<span v-else>
											<span
												style="color: #949494;font-size: 13px;">预计工期：{{obj.row.shijiTime}}</span>
											<!-- <span style="color: #949494;font-size: 13px;margin-left: 10px;"
												v-if="obj.row.sjStartTime==''">暂无实际开始时间</span>
											<span v-if="obj.row.sjStartTime!=''"
												style="color: #949494;font-size: 13px;margin-left: 10px;">实际开始时间：{{obj.row.sjStartTime}}
											</span>
											<span style="color: #949494;font-size: 13px;margin-left: 10px;"
												v-if="obj.row.expectEndTime==''">暂无预测结束时间</span>
											<span v-if="obj.row.expectEndTime!=''"
												style="color: #949494;font-size: 13px;margin-left: 10px;">预测结束时间：{{obj.row.expectEndTime}}</span> -->
										</span>
										<span v-if="obj.row.buildStatus==3">
											<span style="color: #949494;font-size: 13px;margin-left: 10px;"
												v-if="obj.row.yanchiFlag">实际延迟天数：{{obj.row.yanchiTime}}</span>
											<span v-else
												style="color: #949494;font-size: 13px;margin-left: 10px;">实际提前天数：{{obj.row.fuyanchiTime}}</span>
										</span>
										<span v-else>
											<span v-if="obj.row.yanchiFlag"
												style="color: #949494;font-size: 13px;margin-left: 10px;">预计延迟天数：{{obj.row.yanchiTime}}</span>
											<span style="color: #949494;font-size: 13px;margin-left: 10px;"
												v-else>预计提前天数：{{obj.row.fuyanchiTime}}</span>
										</span>
									</template>
								</el-table-column>
							</el-table>
						</div>
					</div>

				</el-tab-pane>
				<el-tab-pane label="编制" name="topActivesecond">
					<!-- <iframe src="../../tunnel/plan.html" width="100%" height="100%" style="border: none;"></iframe> -->
					<iframe src="http://sunw.dx185.com:3001/tunnel/plan.html" width="100%" height="100%" style="border: none;"></iframe>
				</el-tab-pane>
				<el-tab-pane label="采集" name="collect">
					<div style="width: 100%;height: 100%;display: flex;justify-content:space-around;align-items:center;">
						<div style="box-shadow: 0px 2px 12px 0px rgba(67, 116, 162, 0.24);width: 375px;height:670px;display: flex;box-sizing: border-box;align-items: center;justify-content: space-around;">
							<iframe width="375.0px" height="100%" style="box-sizing: border-box;border:none" src="/civil_project/dataColl/#/dataCollectionIndex"></iframe>
						</div>
					</div>
				
				</el-tab-pane>
				
			</el-tabs>

			<ul class="fFive"
				style='position: absolute;display: inline-block;background: #fff;border-radius: 2px;border: 1px solid #eee;color: #333;box-shadow: 0 0 9px #e6e1e1;z-index:500;display: none;font-size: 12px;'>
				<!-- <li>编辑工作</li> -->
				<li @click="addWork(1)">插入工作</li>
				<!-- <li @click="addWork(2)">后方增加工作</li> -->
				<li @click="delWork">删除工作</li>
			</ul>
			<div class="xuantishifu" :style="{'left':enterVal.xian}" style="top: 50;">
				<p>点击结束该工序</p>
			</div>
			<div class="xuanFirstfu" :style="{'left':enterVal.xian}" style="top: 50;">
				<p>点击启动该工序</p>
			</div>
			<div class="xuanfu" :style="{'left':enterVal.xian}" style="top: 50;">
				<p>部位名称：{{enterVal.name}}</p>
				<p>计划开始时间：{{enterVal.startTime}}</p>
				<p>计划结束时间：{{enterVal.endTime}}</p>
				<p v-if="enterVal.buildStatus==0">预测开始时间：{{enterVal.expectStartTime}}</p>
				<p v-if="enterVal.buildStatus==0">预测结束时间：{{enterVal.expectEndTime}}</p>
				<p v-if="enterVal.buildStatus==1">实际开始时间：{{enterVal.sjStartTime}}</p>
				<p v-if="enterVal.buildStatus==1">预测结束时间：{{enterVal.expectEndTime}}</p>
				<p v-if="enterVal.buildStatus==3">实际开始时间：{{enterVal.sjStartTime}}</p>
				<p v-if="enterVal.buildStatus==3">实际结束时间：{{enterVal.sjEndTime}}</p>
				<p style="font-size: 13px;">计划工期：{{enterVal.yuceTime}}</p>
				<p v-if="enterVal.buildStatus == 0">
					<span style="font-size: 13px;">预计工期：{{enterVal.shijiTime}}</span>
				</p>
				<p v-else-if="enterVal.buildStatus==3">
					<span style="font-size: 13px;">实际工期：{{enterVal.shijiTime}}</span>
				</p>
				<p v-else>
					<span style="font-size: 13px;">预计工期：{{enterVal.shijiTime}}</span>
				</p>
				<span style="font-size: 13px;" v-if="enterVal.yanchiFlag">延迟天数：{{enterVal.yanchiTime}}</span>
				<span v-else style="font-size: 13px;">提前天数：{{enterVal.fuyanchiTime}}</span>
			</div>
			<div onclick="fFivehideBack()" id="fFivebackGound"
				style="width:100%;height:100%;background-color:transparent;position:fixed;display:none;top:0;left:0">
			</div>
			<div id="loadbackGound"
				style="width:100%;height:100%;background-color:transparent;position:fixed;top:0;left:0;align-items: center;justify-content: center;display: none;z-index: 99999;">
				<!-- <img src="img/loading.gif"> -->
			</div>
			<ul class="fFiveClo"
				style='position: absolute;display: inline-block;background: rgba(48, 49, 51, 0.85);border-radius: 2px;top: 13px;border: 1px solid #eee;color: #fff;box-shadow: 0 0 9px #e6e1e1;z-index:500;display: none;font-size: 12px;'>
				<li class="shuaxin fFiveCloSpan" @click="openWin(v.id,v.parentId,i,v.name,2,$event)"
					v-for="v,i in suidaoGongxuList" :key="i"
					style="padding: 5px 15px;border-bottom: 1px solid #eee;text-align: center;cursor: pointer;">
					{{v.partName}}
				</li>
			</ul>
			<el-dialog :title="gxtkTitle" class="gxtk" :visible.sync="dialogGxTimeVisible" width="425px"
				:before-close="closeDxTime">
				<!-- <el-date-picker v-model="GxTimeChange" size="mini" type="datetimerange" range-separator="至"
					start-placeholder="开始日期" end-placeholder="结束日期">
				</el-date-picker>
				<span slot="footer" class="dialog-footer">
					<el-button @click="dialogGxTimeVisible = false">取 消</el-button>
					<el-button type="primary" @click="changeGxTime">确 定</el-button>
				</span> -->
				<div style="color: #797979;margin-top: 10px;">
					<span>
						<span>计划开始时间：</span>
						<el-date-picker value-format="yyyy-MM-dd HH:mm:ss" v-model="GxTimeChange[0]" align="right"
							type="datetime" placeholder="选择计划开始时间" @change="jchangeGxTime(1)"></el-date-picker>
					</span>
				</div>
				<div style="color: #797979;margin-top: 10px;">
					<span>
						<span>计划结束时间：</span>
						<el-date-picker value-format="yyyy-MM-dd HH:mm:ss" v-model="GxTimeChange[1]" align="right"
							type="datetime" placeholder="选择计划结束时间" @change="jchangeGxTime(2)"></el-date-picker>
					</span>
				</div>
				<p style="color: #797979;margin-top: 10px;">预测开始时间：{{GxTimeChangeVal.expectStartTime}}</p>
				<p style="color: #797979;margin-top: 10px;">预测结束时间：{{GxTimeChangeVal.expectEndTime}}</p>
			</el-dialog>
			<el-dialog :title="timeText" class="gxtk" :visible.sync="dialogVisible" width="425px"
				:before-close="handleClose">
				<div style="color: #797979;margin-top: 10px;">
					<span>
						<span style="width: 100px;display: inline-block;text-align: right;">工期（天）：</span>
						<span v-if="timenode.buildStatus==3">{{timenode.gongqi}}</span>
						<input v-else style="width: 265px;" class="input" v-model="timenode.gongqi" type="number"
							@blur="jChangeGongqi" />
					</span>
				</div>
				<!-- <div style="color: #797979;margin-top: 10px;">
					<span v-if="timenode.buildStatus==3">
						<span>计划开始时间：</span>
						<span>{{timenode.startTime}}</span>
					</span>
					<span v-else>
						<span>计划开始时间：</span>
						<el-date-picker value-format="yyyy-MM-dd HH:mm:ss" v-model="timenode.startTime" align="right"
							type="datetime" placeholder="选择计划开始时间" @change="jchangeDbwTime(1)"></el-date-picker>
					</span>
				</div>
				<div style="color: #797979;margin-top: 10px;">
					<span v-if="timenode.buildStatus==3">
						<span>计划结束时间：</span>
						<span>{{timenode.endTime}}</span>
					</span>
					<span>
						<span>计划结束时间：</span>
						<el-date-picker value-format="yyyy-MM-dd HH:mm:ss" v-model="timenode.endTime" align="right"
							type="datetime" placeholder="选择计划结束时间" @change="jchangeDbwTime(2)"></el-date-picker>
					</span>
				</div>
				<p style="color: #797979;margin-top: 10px;">预测开始时间：{{timenode.expectStartTime}}</p>
				<p style="color: #797979;margin-top: 10px;">预测结束时间：{{timenode.expectEndTime}}</p> -->
				<div style="color: #797979;margin-top: 10px;">
					<span v-if="timenode.buildStatus==3">
						<span>预测开始时间：</span>
						<span>{{timenode.expectStartTime}}</span>
					</span>
					<span v-else>
						<span>预测开始时间：</span>
						<el-date-picker value-format="yyyy-MM-dd HH:mm:ss" v-model="timenode.expectStartTime"
							align="right" type="datetime" placeholder="选择预测开始时间" @change="jchangeDbwTime(1)">
						</el-date-picker>
					</span>
				</div>
				<div style="color: #797979;margin-top: 10px;">
					<span v-if="timenode.buildStatus==3">
						<span>预测结束时间：</span>
						<span>{{timenode.expectEndTime}}</span>
					</span>
					<span>
						<span>预测结束时间：</span>
						<el-date-picker value-format="yyyy-MM-dd HH:mm:ss" v-model="timenode.expectEndTime"
							align="right" type="datetime" placeholder="选择预测结束时间" @change="jchangeDbwTime(2)">
						</el-date-picker>
					</span>
				</div>
				<p style="color: #797979;margin-top: 10px;">计划开始时间：{{timenode.startTime}}</p>
				<p style="color: #797979;margin-top: 10px;">计划结束时间：{{timenode.endTime}}</p>
			</el-dialog>
			<el-dialog :title="timeText" class="gxtk" :visible.sync="dialogfiveVisible" width="425px"
				:before-close="handleClose">
				<div style="color: #797979;margin-top: 10px;">
					<span style="width: 100px;display: inline-block;text-align: right;">工期（天）：</span>
					<span>{{timeFiveNode.duration}}</span>
				</div>
				<p style="color: #797979;margin-top: 10px;">计划开始时间：{{timeFiveNode.startTime}}</p>
				<p style="color: #797979;margin-top: 10px;">计划结束时间：{{timeFiveNode.endTime}}</p>
				<div v-if="timeFiveNode.buildStatus==3">
					<p style="color: #797979;margin-top: 10px;">实际开始时间：{{timeFiveNode.sjStartTime}}</p>
					<p style="color: #797979;margin-top: 10px;">实际结束时间：{{timeFiveNode.sjEndTime}}</p>
				</div>
				<div v-else-if="timeFiveNode.buildStatus==1">
					<p style="color: #797979;margin-top: 10px;">实际开始时间：{{timeFiveNode.sjStartTime}}</p>
					<p style="color: #797979;margin-top: 10px;">预测结束时间：{{timeFiveNode.expectEndTime}}</p>
				</div>
				<div v-else>
					<p style="color: #797979;margin-top: 10px;">预测开始时间：{{timeFiveNode.expectStartTime}}</p>
					<p style="color: #797979;margin-top: 10px;">预测结束时间：{{timeFiveNode.expectEndTime}}</p>
				</div>
			</el-dialog>
			<el-dialog title="修改工期" :visible.sync="gongqiVisible" width="425px" :before-close="gongqihandleClose">
				<input type="number" name="" class="input" v-model="gongxugongqi" />
				<el-button @click="gongqiVisible = false">取 消</el-button>
				<el-button type="primary" @click="changeGongxuGongqi">确 定</el-button>
				</span>
			</el-dialog>
			<el-drawer size="535px;" title="" :visible.sync="drawer" :with-header="false" :direction="direction"
				:before-close="righthandleClose">
				<iframe :src="setSrc" id="newSettingId" width="100%" height="100%"></iframe>
			</el-drawer>
			<modal :param="param4" :class="{hide:hide4}" @close="closeModal()">
				<div style="padding: 15px 25px;height: calc(100% - 55px);overflow: auto;">
					<div style="height: 204px;overflow-y: scroll;">
						<div v-for="v,i in UnitList" :key="i" style="margin: 5px 0;">
							<input type="checkbox" name="" id="" :checked="v.flag" v-model="v.flag"
								@click="checkUnit(v)" />
							<span>{{v.name}}</span>
						</div>
					</div>
					<p style="text-align: center;margin-top: 10px;position: absolute;bottom: 15px;left: 228px;">
						<button class="btnBlue" @click="daochu">保存</button>
					</p>
				</div>
			</modal>
			<modal :param="param3" class="eltree" :class="{hide:hide3}" @close="closeModal()">
				<div style="padding: 15px 25px;height: calc(100% - 55px);overflow: auto;display: flex;">
					<div style="height: 305px;overflow-y: scroll;width: 50%;padding: 0 10px;">
						<p style="padding-bottom: 5px;font-weight: bold;">待选部位</p>
						<el-tree :default-expand-all="true" :data="atlevelList" show-checkbox node-key="id"
							:default-checked-keys="checkLevelList" ref="tree" highlight-current :props="defaultProps"
							@check="changeCheck">
						</el-tree>
					</div>
					<div style="width: 50%;padding-left: 10px;height: 305px;overflow-y: scroll;padding-right: 10px;">
						<p style="padding-bottom: 5px;font-weight: bold;">已选部位</p>
						<div v-for="v,i in lastCheckedList"
							style="display: flex;justify-content: space-between;width: 100%;margin: 5px 0;align-items: center;">
							<span style="color: #606266;">{{v.fullName}}</span>
							<img src="img/red.png" style="width: 18px;height: 18px;margin-left: 10px;cursor: pointer;"
								@click="delLastCheck(v)">
						</div>
						<!-- <el-tree :default-expand-all="true" :data="checkedlevelList" show-checkbox node-key="id"
							:default-checked-keys="checkLevelList" ref="two" highlight-current :props="defaultProps"
							@check="rightChange">
						</el-tree> -->
					</div>
					<p style="text-align: center;margin-top: 10px;position: absolute;bottom: 15px;left: 319px;">
						<button class="btnBlue" @click="changeJinqian">保存</button>
					</p>
				</div>
			</modal>

			<modal :param="param6" class="eltree" :class="{hide:hide6}" @close="closeModal()">
				<div style="width: 100%;padding: 15px 25px;padding-bottom: 0;" v-if="TKflag==2">
					<el-radio-group v-model="TKtype">
						<el-radio :label="0">部位</el-radio>
						<el-radio :label="1">部位+工序</el-radio>
					</el-radio-group>
				</div>
				<div class="chushihua" style="width: 100%;padding: 15px 25px;padding-bottom: 0;" v-if="TKflag==1">
					<span style="font-weight: bold;">是否初始化：</span>
					<el-switch v-model="chushihuaFlag">
					</el-switch>
					<span v-if="chushihuaFlag">
						<el-date-picker v-model="chushiDate" :disabled="isDisabled" type="date"
							value-format="yyyy-MM-dd" placeholder="选择初始日期">
						</el-date-picker>
					</span>
				</div>
				<div style="padding: 15px 25px;height: calc(100% - 55px);overflow: auto;display: flex;padding-top: 0;">
					<div style="height: 305px;overflow-y: scroll;width: 100%;">
						<p style="padding-bottom: 5px;font-weight: bold;">选择单位工程</p>
						<el-tree :data="allProjectList" show-checkbox node-key="id"
							:default-checked-keys="projectCheckedList" ref="tree6" highlight-current
							:props="defaultProps" @check="changeProjectCheck">
						</el-tree>
					</div>
					<p style="text-align: center;margin-top: 10px;position: absolute;bottom: 15px;left: 227px;">
						<button class="btnBlue" @click="realshuaxin">确定</button>
					</p>
				</div>
			</modal>
			<div class="backPross"
				style="width: 100%; height: 100%; background-color: rgb(73, 73, 73); opacity: 0.6; position: fixed; top: 0px; left: 0px;z-index: 999;display: flex;align-items: center;justify-content: center;display: none;">
				<el-progress type="circle" color="#1e90ff" :percentage="percentage"></el-progress>
			</div>
			<div id="mainCodebackGound"
				style="width:100%;height:100%;background-color:transparent;position:fixed;display:none;top:0;left:0;display: none;"
				@click="mainCodehideBack()"></div>
			<ul class="mainCode"
				style='position: absolute;display: inline-block;background: #fff;border-radius: 2px;top: 13px;border: 1px solid #eee;color: #009688;box-shadow: 0 0 9px #e6e1e1;z-index:500;display: none;font-size: 12px;display: none;'>
				<li @click="setMainCode" style="padding: 5px 10px;text-align: center;cursor: pointer;">{{mainCodeText}}
				</li>
			</ul>
			<el-dialog title="进尺量采集" class="jinchiBody" :visible.sync="positionsdTimeVisible" width="415px"
				:before-close="suidaoTClose">
				<div style="color: #333;" class="sui">
					<!-- <div style="display: flex;align-items: center;">
						<span>采集日期：</span>
						<el-date-picker v-model="suidaoTime" value-format="yyyy-MM-dd" type="date" placeholder="选择日期"
							:picker-options="pickerOptions">
						</el-date-picker>
					</div> -->
					<div style="margin: 10px;color: rgb(170, 170, 170);margin-left: 0;">
						当前月进度指标<span>{{sdAllVal.monthlyProgress}}</span>m/月
					</div>
					<div style="margin: 10px;color: rgb(170, 170, 170);margin-left: 0;">
						注：总长<span>{{sdAllVal.totalLenght}}</span>m，已完成开累<span>{{sdAllVal.quantityImpl}}</span>m，剩余<span>{{sdAllVal.residue}}</span>m，预计
						<span v-if="sixPart.buildStatus == 0">xxx</span>
						<span
							v-else>{{sdAllVal.residue >= 0.1 ? (Number(sdAllVal.expectedCompletionDays)+1) : sdAllVal.expectedCompletionDays}}</span>
						天后完成
					</div>
					<div style="display: flex;align-items: center;">
						<span>进尺数量：</span>
						<input class="input" style="width: 170px;" type="number" v-model="todayInVal"
							placeholder="请输入进尺数量" />
					</div>
					<div style="margin-top: 20px;width: 100%;display: flex;justify-content: end;">
						<span @click="suidaoTClose" style="display: flex;margin-right: 20px;" class="btnGray">取消</span>
						<span @click="todayIn" style="display: flex;" class="btnBlue">确定</span>
					</div>
				</div>
			</el-dialog>
		</div>
		<input type="file" id="importFileId" hidden="hidden" />
	</body>
	<script src="static/js/jquery-1.8.3.js" type="text/javascript" charset="utf-8"></script>
	<script src="static/js/vue.js" type="text/javascript" charset="utf-8"></script>
	<script src="static/js/elementui.js" type="text/javascript" charset="utf-8"></script>
	<script src="static/dx.js" type="text/javascript" charset="utf-8"></script>
	<script src="static/js/component.js" type="text/javascript" charset="utf-8"></script>
	<script src="./newList.js"></script>
</html>
